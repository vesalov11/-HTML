<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Resume - Start Bootstrap Theme</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="script.js">
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Clarence Taylor</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="логоо.PNG" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">Инсталирайте пакети от хранилищата на Ubuntu
                    </a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#experience">Конфигурирайте виртуална среда на Python</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#education">Създайте и конфигурирайте нов Django проект</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#skills">Коригирайте настройките на проекта</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#interests">Конфигурирайте Apache</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#awards">Приключване на някои проблеми с разрешенията</a></li>

                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <div class="container-fluid p-0">





            <!-- About-->
            <section class="resume-section" id="experience">
                <div class="resume-section-content">
                    <h1 class="mb-0">
           
                     <h4>Как да обслужваме Django приложения с Apache</h4>
                    </h1>
                    <div class="subheading mb-5">
                       <h6>

                        <h6>Въведение</h6>
 <h6> Django е мощна уеб рамка, която може да ви помогне бързо да стартирате вашето Python приложение или уебсайт. Django включва опростен сървър за разработка за локално тестване на вашия код, но за всичко, дори малко свързано с производството, е необходим по-сигурен и мощен уеб сървър.

В това ръководство ще демонстрираме как да инсталирате и конфигурирате Django във виртуална среда на Python. След това ще настроим Apache пред нашето приложение, така че да може да обработва клиентски заявки директно, преди да предаде заявки, които изискват логика на приложението, към приложението Django. Ще направим това с помощта на mod_wsgiмодула Apache, който може да комуникира с Django през спецификацията на интерфейса WSGI.

Предпоставки и цели
За да завършите това ръководство, трябва да имате нов екземпляр на Ubuntu 16.04 сървър с различен от root потребител с sudoконфигурирани привилегии. Можете да научите как да настроите това, като преминете през нашето ръководство за първоначална настройка на сървъра .

Ще инсталираме Django във виртуална среда на Python. Инсталирането на Django в среда, специфична за вашия проект, ще позволи вашите проекти и техните изисквания да се обработват отделно.

След като стартираме нашето приложение, ще конфигурираме Apache да взаимодейства с приложението Django. Той ще направи това с mod_wsgiмодула Apache, който може да превежда HTTP заявки в предсказуем формат на приложение, дефиниран от спецификация, наречена WSGI. Можете да научите повече за WSGI, като прочетете свързания раздел в това ръководство .

<h6></h6>  </h6>

<h6> Инсталирайте пакети от хранилищата на Ubuntu
За да започнем процеса, ще изтеглим и инсталираме всички необходими елементи от хранилищата на Ubuntu. Това ще включва уеб сървъра Apache, mod_wsgiмодула, използван за интерфейс с нашето приложение Django, и pipмениджъра на пакети Python, който може да се използва за изтегляне на нашите инструменти, свързани с Python.

За да получим всичко необходимо, актуализирайте локалния индекс на пакетите на вашия сървър и след това инсталирайте подходящите пакети.

Ако използвате Django с Python 2 , командите, от които се нуждаете, са:</h6> 
 
<img src="photo1.PNG" alt="">
<img src="photo2.PNG" alt="">
            </section>
            <hr class="m-0" />
            <!-- Experience-->

            

            <section class="resume-section" id="experience">
                <div class="resume-section-content">
                    <h2 class="mb-5">Конфигурирайте виртуална среда на Python
                    </h2>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                       <p>Сега, след като имаме компонентите от хранилищата на Ubuntu, можем да започнем да работим по нашия проект Django. Първата стъпка е да създадем виртуална среда на Python, така че нашият проект Django да бъде отделен от инструментите на системата и всички други проекти на Python, върху които може да работим.

                        Трябва да инсталираме virtualenvкомандата за създаване на тези среди. Можем да получим това с помощта на pip.</p>
                        <p>Ако използвате Python2:</p>
                        <img src="photo3.PNG" alt="">
                        <p>Ако използвате Python 3 :</p>
                        <img src="Заснемане.PNG" alt="">
                        <p>С virtualenvинсталирането можем да започнем да формираме нашия проект. Създайте директория, в която искате да запазите проекта си, и се преместете в директорията:</p>
                        <img src="Заснемане1.PNG" alt="">
                        <p>В директорията на проекта създайте виртуална среда на Python, като напишете:
                            <img src="Заснемане2.PNG" alt="">
                            <p>Това ще създаде директория, наречена myprojectenvвъв вашата myprojectдиректория. Вътре ще инсталира локална версия на Python и локална версия на pip. Можем да използваме това, за да инсталираме и конфигурираме изолирана Python среда за нашия проект.

                                Преди да инсталираме изискванията на нашия проект за Python, трябва да активираме виртуалната среда. Можете да направите това, като напишете:</p>

                                <img src="Заснемане3.PNG" alt="">
                                <p>Вашата подкана трябва да се промени, за да покаже, че сега работите във виртуална среда на Python. Ще изглежда така: .(myprojectenv)user@host:~/myproject$

                                    При активна виртуална среда инсталирайте Django с локалния екземпляр на pip</p>
                                    <img src="Заснемане4.PNG" alt="">
                                    <p></p>




                        </p>
                        




               
            <!-- Education-->
            <section class="resume-section" id="education">
                <div class="resume-section-content">
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Създайте и конфигурирайте нов Django проект
                            </h3>
                            <p>
                                Сега, когато Django е инсталиран в нашата виртуална среда, можем да създадем действителните файлове на проекта Django.
                                <P>Създайте проекта Django</P>
                                Тъй като вече имаме директория на проекта, ще кажем на Django да инсталира файловете тук. Той ще създаде директория от второ ниво с действителния код, което е нормално, и ще постави скрипт за управление в тази директория. Ключът към това е точката в края, която казва на Django да създаде файловете в текущата директория:
                                <img src="Заснемане5.PNG" alt="">
                            


                            </p>
                        </div>
                    </div>
                    <div class="d-flex flex-column flex-md-row justify-content-between">
                        <div class="flex-grow-1">
                        </div>

                    </div>
                </div>
            </section>
            <hr class="m-0" />





            <!-- Skills-->
            <section class="resume-section" id="skills">
                <div class="resume-section-content">
                    <div class="subheading mb-3"></div>
                    
                    Първото нещо, което трябва да направим с нашите новосъздадени файлове на проекта, е да коригираме настройките. Отворете файла с настройки с вашия текстов редактор:
                    <img src="Заснемане6.PNG" alt="">
                    <p>Ние ще използваме базата данни SQLite по подразбиране в това ръководство за простота, така че всъщност не е необходимо да променяме твърде много. Ще се фокусираме върху конфигурирането на разрешените хостове, за да ограничим домейните, на които отговаряме, и конфигурирането на директорията със статични файлове, където Django ще постави статични файлове, така че уеб сървърът да може да ги обслужва лесно.

                        Започнете, като намерите ALLOWED_HOSTSлинията. В квадратните скоби въведете публичния IP адрес на вашия сървър, име на домейн или и двете. Всяка стойност трябва да бъде поставена в кавички и разделена със запетая като нормален списък на Python:</p>
                        <img src="Заснемане7.PNG" alt="">
                        <p>В долната част на файла ще добавим ред за конфигуриране на тази директория. Джанго използваSTATIC_ROOT настройката, за да определи директорията, където да отидат тези файлове. Ще използваме част от Python, за да му кажем да използва директория, наречена „статична“ в главната директория на нашия проект:</p>
                        <img src="Заснемане8.PNG" alt="">
                        <h4>Завършете първоначалната настройка на проекта
                        </h4>
                        Сега можем да мигрираме първоначалната схема на база данни към нашата SQLite база данни с помощта на скрипта за управление:
                        <img src="Заснемане9.PNG" alt="">
                        <p>Създайте администраторски потребител за проекта, като напишете:</p>  
                    <img src="Заснемане10.PNG" alt="">
                    <p>Ще трябва да изберете потребителско име, да предоставите имейл адрес и да изберете и потвърдите парола.

                        Можем да съберем цялото статично съдържание в местоположението на директорията, което сме конфигурирали, като напишем:</p>
                        <img src="Заснемане11.PNG" alt="">
                        <p>Ще трябва да потвърдите операцията. Статичните файлове ще бъдат поставени в директория, нареченаstatic в директорията на вашия проект.

                            Сега можем да коригираме настройките на нашата защитна стена, за да позволим трафик към нашия сървър за разработка на Django, който ще изпълняваме на порт 8000. Ако сте следвали първоначалното ръководство за настройка на сървъра в предварителните условия, трябва да имате активирана UFW защитна стена в момента.
                            
                            Разрешете връзки към сървъра за разработка, като напишете:</p>
                            <img src="Заснемане12.PNG" alt="">
                            <p>И накрая, можете да тествате проекта си, като стартирате сървъра за разработка на Django с тази команда:</p>
                            <img src="Заснемане13.PNG" alt="">
                            <p>Във вашия уеб браузър посетете името на домейна или IP адреса на вашия сървър, последвано от :8000</p>
                            <img src="Заснемане14.PNG" alt="">
                            <p>Трябва да видите индексната страница на Django по подразбиране:
                                Ако добавите /adminкъм края на URL адреса в адресната лента, ще бъдете подканени да въведете администраторското потребителско име и парола, които сте създали с командата createsuperuser:</p>
                                <img src="Заснемане16.PNG" alt="">
                                <p>След удостоверяване можете да получите достъп до администраторския интерфейс на Django по подразбиране:
                        
                                </p>
                                     <img src="Заснемане17.PNG" alt="">
                            <p>Когато приключите с проучването, натиснете CTRL-C в прозореца на терминала, за да изключите сървъра за разработка.

                                Вече приключихме с Django за момента, така че можем да излезем от нашата виртуална среда, като напишем:</p>
                                <img src="Заснемане18.PNG" alt="">
                    </p>
                        
                </div>
            </section>
            <hr class="m-0" />





            <!-- Interests-->
            <section class="resume-section" id="interests">
                <div class="resume-section-content">
                    <h2 class="mb-5">Конфигурирайте Apache</h2>


                    <p>Сега, когато вашият Django проект работи, можем да конфигурираме Apache като преден край. Клиентските връзки, които получава, ще бъдат преведени във формат WSGI, който приложението Django очаква с помощта на mod_wsgiмодула. Това трябваше да бъде автоматично активирано при инсталиране по-рано.

                        За да конфигурираме WSGI пропуска, ще трябва да редактираме файла на виртуалния хост по подразбиране:</p>
                        <img src="Заснемане19.PNG" alt="">
                        <p>Можем да запазим директивите, които вече присъстват във файла. Просто трябва да добавим някои допълнителни елементи.

                            За да започнем, нека конфигурираме статичните файлове. Ще използваме псевдоним, за да кажем на Apache да картографира всички заявки, започващи с, /staticкъм „статичната“ директория в папката на нашия проект. Събрахме статичните активи там по-рано. Ще настроим псевдонима и след това ще предоставим достъп до въпросната директория с блок на директория:
                            
                            </p>

                            <img src="Заснемане20.PNG" alt="">
                            <p>След това ще предоставим достъп до wsgi.pyфайла в директорията на проекта от второ ниво, където се съхранява кодът на Django. За да направим това, ще използваме секция на директория с файлова секция вътре. Ще предоставим достъп до файла вътре в тази вложена конструкция:</p>
                            <img src="Заснемане21.PNG" alt="">
                            <p>След като това е конфигурирано, ние сме готови да конструираме частта от файла, която всъщност обработва WSGI пропуска. Ще използваме режим на демон, за да стартираме процеса WSGI, което е препоръчителната конфигурация. Можем да използваме WSGIDaemonProcessдирективата, за да настроим това.

                                Тази директива приема произволно име за процеса. Ще използваме myproject, за да останем последователни. След това настроихме дома на Python, където Apache може да намери всички компоненти, които може да са необходими. Тъй като използвахме виртуална среда, можем да я насочим директно към директорията на нашата базова виртуална среда. След това задаваме пътя на Python да сочи към основата на нашия проект Django.
                                
                                След това трябва да посочим групата процеси. Това трябва да сочи към същото име, което сме избрали за директивата WSGIDaemonProcess( myprojectв нашия случай). И накрая, трябва да зададем псевдонима на скрипта, така че Apache да предава заявки за основния домейн към wsgi.pyфайла:</p>
                                <img src="Заснемане22.PNG" alt="">
                                <p>Когато приключите с тези промени, запазете и затворете файла.</p>


                </div>
            </section>
            <hr class="m-0" />





            <!-- Awards-->
            <section class="resume-section" id="awards">
                <div class="resume-section-content">
                    <h4>Приключване на някои проблеми с разрешенията
                    </h4>
                    <p>Ако използвате базата данни SQLite, която е използваната по подразбиране в тази статия, трябва да разрешите на процеса Apache достъп до този файл.

                        За да направите това, първата стъпка е да промените разрешенията, така че собственикът на групата на базата данни да може да чете и пише. Файлът на базата данни се извиква db.sqlite3по подразбиране и трябва да се намира в директорията на вашия базов проект:
                        
                        </p>
                        <img src="Заснемане23.PNG" alt="">
                        <p>След това трябва да дадем на групата, под която работи Apache, групата www-data, груповата собственост на файла:</p>
                        <img src="Заснемане24.PNG" alt="">
                        <p>За да пишем във файла, ние също трябва да дадем собственост на групата Apache върху родителската директория на базата данни:</p>
                        <img src="Заснемане25.PNG" alt="">
                        <p>Трябва отново да се настроим през нашата защитна стена. Вече не се нуждаем от отворен порт 8000, тъй като проксираме чрез Apache, така че можем да премахнем това правило. След това можем да добавим изключение, за да разрешим трафик към процеса на Apache:</p>
                        <img src="Заснемане26.PNG" alt="">
                        <p> Проверете Apache файловете си, за да се уверите, че не сте направили синтактични грешки:

                        </p>

                        <img src="Заснемане27.PNG" alt="">
                        <p>Докато последният изходен ред изглежда така, вашите файлове са в добра форма:</p>
                        <img src="Заснемане28.PNG" alt="">
                        <p>След като направите тези стъпки, вие сте готови да рестартирате услугата Apache, за да приложите промените, които сте направили. Рестартирайте Apache, като напишете:</p>
                        <img src="Заснемане29.PNG" alt="">
                        <p>Вече трябва да имате достъп до вашия Django сайт, като отидете на името на домейна или IP адреса на вашия сървър, без да посочвате порт. Редовният сайт и администраторският интерфейс трябва да функционират според очакванията.</p>
                    <h3>Заключение</h3>  
                    <p>В това ръководство сме създали проект на Django в собствена виртуална среда. Конфигурирахме Apache с mod_wsgiда обработва клиентски заявки и интерфейс с приложението Django.

                        Django прави създаването на проекти и приложения лесно, като предоставя много от общите части, което ви позволява да се съсредоточите върху уникалните елементи. Като използвате общата верига от инструменти, описана в тази статия, можете лесно да обслужвате приложенията, които създавате от един сървър.</p>
   
                        <div class="contact-info">
                            <h4>Контакти </h4>
                            <ul>
  
                              <li><img src="email.png" alt=""width="40" height="40"><strong>Имейл:</strong> pgeebansko@abv.bg </li>
                              
                              <li><img src="phone.png" alt=""width="40" height="40"><strong>Телефон:</strong>074 988 402</li>
                              
                              <li><img src="location.png" alt=""width="40" height="40"><strong>Адрес:</strong>  ул. „България“ 23, 2770 кв. Стария град, Банско</li>
                              <li><img src="fb.png" alt=""width="40" height="40"><strong><a href="https://www.facebook.com/people/%D0%9F%D0%93%D0%95%D0%95-%D0%B3%D1%80%D0%91%D0%B0%D0%BD%D1%81%D0%BA%D0%BE/100057482116775/" target="_blank">Facebook</a> 
                                <li><img src="wwww.PNG" alt=""width="40" height="40"><strong><a href="https://pgeebansko.org/" target="_blank">Уебсайт</a> 

                              </strong> </li>

                            </ul>
                          </div>


                        

                </div>
            </section>
        </div>




        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>






    </body>
</html>
